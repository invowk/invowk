---
sidebar_position: 3
---

import Snippet from '@site/src/components/Snippet';

# Comandos CLI de Dependências de Módulos

O Invowk fornece um conjunto de comandos `invowk module` para gerenciar dependências declaradas em `invkmod.cue`.

## Visão Geral dos Comandos

| Comando | Descrição |
|---------|-----------|
| `invowk module add` | Resolve uma dependência e imprime uma entrada de `requires` |
| `invowk module remove` | Remove uma dependência do lock file |
| `invowk module deps` | Lista dependências resolvidas |
| `invowk module sync` | Resolve dependências de `invkmod.cue` |
| `invowk module update` | Atualiza dependências para as versões mais recentes compatíveis |
| `invowk module vendor` | Faz vendor das dependências em `invk_modules/` (parcial) |

## invowk module add

Resolve uma dependência e imprime a entrada de `requires` para adicionar em `invkmod.cue`.

### Uso

<Snippet id="modules/dependencies/cli/add-usage" />

### Argumentos

| Argumento | Descrição |
|-----------|-----------|
| `git-url` | URL do repositório Git (HTTPS ou SSH) |
| `version` | Restrição de versão semântica |

### Flags

| Flag | Descrição |
|------|-----------|
| `--alias <name>` | Namespace personalizado para a dependência |
| `--path <path>` | Subdiretório dentro do repositório |

### Exemplos

<Snippet id="modules/dependencies/cli/add-examples" />

### Saída

<Snippet id="modules/dependencies/cli/add-output" />

:::note
`invowk module add` não edita `invkmod.cue` automaticamente. Copie a entrada de `requires` impressa para os metadados do módulo e execute `invowk module sync`.
:::

## invowk module remove

Remove uma dependência do lock file.

### Uso

<Snippet id="modules/dependencies/cli/remove-usage" />

### Argumentos

| Argumento | Descrição |
|-----------|-----------|
| `git-url` | URL do repositório Git a remover |

### Exemplos

<Snippet id="modules/dependencies/cli/remove-example" />

### Saída

<Snippet id="modules/dependencies/cli/remove-output" />

:::note
Esse comando remove a dependência apenas do lock file. Você precisa remover manualmente a entrada de `requires` de `invkmod.cue`. Arquivos de cache não são deletados.
:::

## invowk module deps

Lista todas as dependências resolvidas no lock file.

### Uso

<Snippet id="modules/dependencies/cli/deps-usage" />

### Saída

<Snippet id="modules/dependencies/cli/deps-output" />

### Sem Dependências

<Snippet id="modules/dependencies/cli/deps-empty" />

## invowk module sync

Sincroniza todas as dependências declaradas em `invkmod.cue`. Lê o campo `requires`, resolve restrições de versão, baixa módulos e atualiza o lock file.

### Uso

<Snippet id="modules/dependencies/cli/sync-usage" />

### Saída

<Snippet id="modules/dependencies/cli/sync-output" />

### Sem Requirements

<Snippet id="modules/dependencies/cli/sync-empty" />

## invowk module update

Atualiza dependências para as versões mais recentes compatíveis com as restrições declaradas.

### Uso

<Snippet id="modules/dependencies/cli/update-usage" />

### Argumentos

| Argumento | Descrição |
|-----------|-----------|
| `git-url` | (Opcional) Dependência específica para atualizar |

### Exemplos

<Snippet id="modules/dependencies/cli/update-examples" />

### Saída

<Snippet id="modules/dependencies/cli/update-output" />

### Sem Atualizações

<Snippet id="modules/dependencies/cli/update-empty" />

## invowk module vendor

Faz vendor das dependências no diretório `invk_modules/` para uso offline e distribuição.

### Uso

<Snippet id="modules/dependencies/cli/vendor-usage" />

### Saída

<Snippet id="modules/dependencies/cli/vendor-output" />

:::note
Vendor ainda é um preview. O comando informa o que seria incluído e cria o diretório, mas ainda não faz download das dependências.
:::

## Workflows Comuns

### Configuração Inicial

<Snippet id="modules/dependencies/cli/workflow-init" />

### Clone Novo

<Snippet id="modules/dependencies/cli/workflow-fresh" />

### Atualizações Regulares

<Snippet id="modules/dependencies/cli/workflow-update" />

### Troubleshooting

<Snippet id="modules/dependencies/cli/workflow-troubleshoot" />

## Variáveis de Ambiente

| Variável | Descrição |
|----------|-----------|
| `INVOWK_MODULES_PATH` | Sobrescreve o diretório de cache de módulos |
| `GITHUB_TOKEN` | Autenticação GitHub |
| `GITLAB_TOKEN` | Autenticação GitLab |
| `GIT_TOKEN` | Autenticação Git genérica |

## Códigos de Saída

| Código | Significado |
|--------|-------------|
| 0 | Sucesso |
| 1 | Erro geral |
| 1 | Módulo não encontrado (para remove) |
| 1 | Nenhum invkmod.cue encontrado (para sync) |
| 1 | Falha na resolução de versão |
| 1 | Falha ao clonar/buscar Git |
