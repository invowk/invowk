---
sidebar_position: 3
---

import Snippet from '@site/src/components/Snippet';

# Seu Primeiro Invkfile

Agora que você executou seu primeiro comando, vamos criar algo mais prático. Criaremos um invkfile para um projeto típico com comandos de build, teste e deploy.

## Entendendo a Estrutura

Um invkfile tem uma estrutura simples:

<Snippet id="getting-started/invkfile-basic-structure" />

Invkfiles definem comandos diretamente. Se você quiser namespacing, use um módulo e defina o ID do módulo em `invkmod.cue`.

## Um Exemplo do Mundo Real

Vamos criar um invkfile para um projeto Go:

<Snippet id="getting-started/go-project-full" />

Salve isso como `invkfile.cue` e tente:

<Snippet id="cli/list-commands" />

Você verá:

<Snippet id="cli/output-list-commands" />

## Nomes Estilo Subcomando

Note como `test unit` e `test coverage` criam uma hierarquia. Você os executa assim:

<Snippet id="cli/run-subcommands" />

Isso é apenas convenção de nomenclatura - espaços no nome criam uma sensação de subcomando. É ótimo para organizar comandos relacionados!

## Múltiplos Runtimes

O comando `test unit` permite tanto o runtime `native` quanto o `virtual`:

<Snippet id="getting-started/runtimes-multiple" />

O primeiro é o padrão. Você pode sobrescrevê-lo:

<Snippet id="cli/runtime-override" />

## Comandos Específicos por Plataforma

O comando `clean` só funciona no Linux e macOS (porque usa `rm -rf`):

<Snippet id="getting-started/platforms-linux-macos" />

Se você tentar executá-lo no Windows, o Invowk mostrará uma mensagem de erro útil explicando que o comando não está disponível na sua plataforma.

## Adicionando Dependências

Vamos tornar nosso comando de build mais inteligente verificando se o Go está instalado:

<Snippet id="getting-started/build-with-deps" />

Agora se você executar `invowk cmd build` sem o Go instalado, você receberá:

<Snippet id="cli/output-deps-not-satisfied" />

## Variáveis de Ambiente

Você pode definir variáveis de ambiente em diferentes níveis:

<Snippet id="getting-started/env-vars-levels" />

As variáveis de ambiente são mescladas, com níveis posteriores sobrescrevendo os anteriores.

## Próximos Passos

Agora você conhece o básico de criar invkfiles! Continue aprendendo sobre:

- [Conceitos Principais](../core-concepts/invowkfile-format) - Mergulho profundo no formato do invkfile
- [Modos de Runtime](../runtime-modes/overview) - Aprenda sobre runtimes native, virtual e container
- [Dependências](../dependencies/overview) - Todas as formas de declarar dependências
