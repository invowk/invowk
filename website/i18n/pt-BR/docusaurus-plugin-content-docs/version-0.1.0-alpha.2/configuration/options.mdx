---
sidebar_position: 2
---

import Snippet from '@site/src/components/Snippet';

# Opções de Configuração

Esta página documenta todas as opções de configuração disponíveis para o Invowk™.

## Schema de Configuração

O arquivo de configuração usa o formato CUE e segue este schema:

<Snippet id="config/schema" />

Campos desconhecidos são rejeitados, então mantenha o arquivo de configuração limitado às opções do schema.

## Referência de Opções

### container_engine

**Tipo:** `"podman" | "docker"`  
**Padrão:** `"podman"`

Especifica qual container runtime usar para execução de comandos baseada em container.

<Snippet id="config/container-engine" />

Se a engine preferida não estiver disponível, o Invowk faz fallback para a outra quando o runtime container é necessário.

### search_paths

**Tipo:** `[...string]`  
**Padrão:** `[]`

Diretórios adicionais para buscar invkfiles e módulos. Caminhos são buscados em ordem após o diretório atual.

<Snippet id="config/search-paths" />

**Ordem de Busca:**
1. Diretório atual (sempre buscado primeiro, maior prioridade)
2. Cada caminho em `search_paths` em ordem
3. `~/.invowk/cmds` (sempre incluído)

Comandos de caminhos anteriores sobrescrevem comandos com o mesmo nome de caminhos posteriores.

### default_runtime

**Tipo:** `"native" | "virtual" | "container"`  
**Padrão:** `"native"`

Define o modo de runtime padrão global para comandos que não especificam um runtime.

<Snippet id="config/default-runtime" />

**Opções de Runtime:**
- `"native"` - Executar usando o shell nativo do sistema (bash, zsh, PowerShell, etc.)
- `"virtual"` - Executar usando o interpretador de shell embutido do Invowk (mvdan/sh)
- `"container"` - Executar dentro de um container (requer Docker ou Podman)

:::note
Comandos podem sobrescrever este padrão especificando seu próprio runtime no campo `implementations`.
:::

### virtual_shell

**Tipo:** `#VirtualShellConfig`  
**Padrão:** `{}`

Configura o comportamento do virtual shell runtime.

<Snippet id="config/virtual-shell" />

#### virtual_shell.enable_uroot_utils

**Tipo:** `bool`  
**Padrão:** `true`

Habilita utilitários u-root no virtual shell. Quando habilitado, comandos adicionais como `ls`, `cat`, `grep` e outros ficam disponíveis no ambiente virtual shell.

<Snippet id="config/virtual-shell" />

Isso é útil quando você quer que o virtual shell tenha mais capacidades além dos builtins básicos de shell, enquanto ainda evita execução de shell nativo.

### ui

**Tipo:** `#UIConfig`  
**Padrão:** `{}`

Configura as preferências de interface do usuário.

<Snippet id="config/ui" />

#### ui.color_scheme

**Tipo:** `"auto" | "dark" | "light"`  
**Padrão:** `"auto"`

Define o esquema de cores para a saída do Invowk.

<Snippet id="config/ui-color-scheme" />

**Opções:**
- `"auto"` - Detectar das configurações do terminal (respeita `COLORTERM`, `TERM`, etc.)
- `"dark"` - Usar cores otimizadas para terminais escuros
- `"light"` - Usar cores otimizadas para terminais claros

#### ui.verbose

**Tipo:** `bool`  
**Padrão:** `false`

Habilita saída verbose por padrão. Quando habilitado, Invowk imprime informações adicionais sobre descoberta de comandos, validação de dependências e execução.

<Snippet id="config/ui-verbose" />

Isso é equivalente a sempre passar `--verbose` na linha de comando.

#### ui.interactive

**Tipo:** `bool`  
**Padrão:** `false`

Habilita o modo interativo por padrão. Quando habilitado, os comandos são executados em um buffer de tela alternativo com suporte completo a PTY, permitindo que programas interativos como prompts de senha, confirmações e outras interações baseadas em stdin funcionem corretamente.

<Snippet id="config/ui-interactive" />

Isso é equivalente a sempre passar `--interactive` na linha de comando.

### container

**Tipo:** `#ContainerConfig`  
**Padrão:** `{}`

Configura o comportamento do runtime container.

<Snippet id="config/container-auto-provision" />

#### container.auto_provision.enabled

**Tipo:** `bool`  
**Padrão:** `true`

Habilita o provisionamento automático do binário do invowk e módulos dentro dos containers.
Quando habilitado, o Invowk cria uma imagem derivada em cache para cada execução de container, anexando uma pequena camada de provisionamento sobre a imagem base. Se o provisionamento falhar, o Invowk avisa e usa a imagem base.

#### container.auto_provision.binary_path

**Tipo:** `string`  
**Padrão:** *(vazio; usa o binário do invowk em execução)*

Sobrescreve o caminho do binário do invowk para provisionar.

#### container.auto_provision.modules_paths

**Tipo:** `[...string]`
**Padrão:** `[]`

Diretórios adicionais de módulos para provisionar dentro dos containers.

#### container.auto_provision.cache_dir

**Tipo:** `string`  
**Padrão:** `~/.cache/invowk/provision`

Sobrescreve o diretório de cache para metadados de imagens provisionadas.

## Exemplo Completo

Aqui está um arquivo de configuração completo com todas as opções:

<Snippet id="config/complete-example" />
