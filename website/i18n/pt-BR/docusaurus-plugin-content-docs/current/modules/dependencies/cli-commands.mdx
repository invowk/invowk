---
sidebar_position: 3
---

import Snippet from '@site/src/components/Snippet';

# Comandos CLI de Dependências de Packs

O Invowk fornece um conjunto de comandos `invowk pack` para gerenciar dependências declaradas em `invkpack.cue`.

## Visão Geral dos Comandos

| Comando | Descrição |
|---------|-----------|
| `invowk pack add` | Resolve uma dependência e imprime uma entrada de `requires` |
| `invowk pack remove` | Remove uma dependência do lock file |
| `invowk pack deps` | Lista dependências resolvidas |
| `invowk pack sync` | Resolve dependências de `invkpack.cue` |
| `invowk pack update` | Atualiza dependências para as versões mais recentes compatíveis |
| `invowk pack vendor` | Faz vendor das dependências em `invk_packs/` (parcial) |

## invowk pack add

Resolve uma dependência e imprime a entrada de `requires` para adicionar em `invkpack.cue`.

### Uso

<Snippet id="packs/dependencies/cli/add-usage" />

### Argumentos

| Argumento | Descrição |
|-----------|-----------|
| `git-url` | URL do repositório Git (HTTPS ou SSH) |
| `version` | Restrição de versão semântica |

### Flags

| Flag | Descrição |
|------|-----------|
| `--alias <name>` | Namespace personalizado para a dependência |
| `--path <path>` | Subdiretório dentro do repositório |

### Exemplos

<Snippet id="packs/dependencies/cli/add-examples" />

### Saída

<Snippet id="packs/dependencies/cli/add-output" />

:::note
`invowk pack add` não edita `invkpack.cue` automaticamente. Copie a entrada de `requires` impressa para os metadados do pack e execute `invowk pack sync`.
:::

## invowk pack remove

Remove uma dependência do lock file.

### Uso

<Snippet id="packs/dependencies/cli/remove-usage" />

### Argumentos

| Argumento | Descrição |
|-----------|-----------|
| `git-url` | URL do repositório Git a remover |

### Exemplos

<Snippet id="packs/dependencies/cli/remove-example" />

### Saída

<Snippet id="packs/dependencies/cli/remove-output" />

:::note
Esse comando remove a dependência apenas do lock file. Você precisa remover manualmente a entrada de `requires` de `invkpack.cue`. Arquivos de cache não são deletados.
:::

## invowk pack deps

Lista todas as dependências resolvidas no lock file.

### Uso

<Snippet id="packs/dependencies/cli/deps-usage" />

### Saída

<Snippet id="packs/dependencies/cli/deps-output" />

### Sem Dependências

<Snippet id="packs/dependencies/cli/deps-empty" />

## invowk pack sync

Sincroniza todas as dependências declaradas em `invkpack.cue`. Lê o campo `requires`, resolve restrições de versão, baixa packs e atualiza o lock file.

### Uso

<Snippet id="packs/dependencies/cli/sync-usage" />

### Saída

<Snippet id="packs/dependencies/cli/sync-output" />

### Sem Requirements

<Snippet id="packs/dependencies/cli/sync-empty" />

## invowk pack update

Atualiza dependências para as versões mais recentes compatíveis com as restrições declaradas.

### Uso

<Snippet id="packs/dependencies/cli/update-usage" />

### Argumentos

| Argumento | Descrição |
|-----------|-----------|
| `git-url` | (Opcional) Dependência específica para atualizar |

### Exemplos

<Snippet id="packs/dependencies/cli/update-examples" />

### Saída

<Snippet id="packs/dependencies/cli/update-output" />

### Sem Atualizações

<Snippet id="packs/dependencies/cli/update-empty" />

## invowk pack vendor

Faz vendor das dependências no diretório `invk_packs/` para uso offline e distribuição.

### Uso

<Snippet id="packs/dependencies/cli/vendor-usage" />

### Saída

<Snippet id="packs/dependencies/cli/vendor-output" />

:::note
Vendor ainda é um preview. O comando informa o que seria incluído e cria o diretório, mas ainda não faz download das dependências.
:::

## Workflows Comuns

### Configuração Inicial

<Snippet id="packs/dependencies/cli/workflow-init" />

### Clone Novo

<Snippet id="packs/dependencies/cli/workflow-fresh" />

### Atualizações Regulares

<Snippet id="packs/dependencies/cli/workflow-update" />

### Troubleshooting

<Snippet id="packs/dependencies/cli/workflow-troubleshoot" />

## Variáveis de Ambiente

| Variável | Descrição |
|----------|-----------|
| `INVOWK_PACKS_PATH` | Sobrescreve o diretório de cache de packs |
| `GITHUB_TOKEN` | Autenticação GitHub |
| `GITLAB_TOKEN` | Autenticação GitLab |
| `GIT_TOKEN` | Autenticação Git genérica |

## Códigos de Saída

| Código | Significado |
|--------|-------------|
| 0 | Sucesso |
| 1 | Erro geral |
| 1 | Pack não encontrado (para remove) |
| 1 | Nenhum invkpack.cue encontrado (para sync) |
| 1 | Falha na resolução de versão |
| 1 | Falha ao clonar/buscar Git |
