---
sidebar_position: 1
---

# Visão Geral de Módulos

:::warning Alpha — O Sistema de Módulos Pode Mudar
O sistema de módulos ainda está sendo refinado. Embora nosso objetivo seja manter compatibilidade retroativa, **mudanças incompatíveis podem ocorrer** antes do release 1.0. Arquivos de lock garantem reprodutibilidade, mas o comportamento da resolução de módulos pode evoluir.
:::

Módulos permitem que packs declarem dependências de outros packs hospedados em repositórios Git remotos. Isso possibilita reutilização de código, compartilhamento de definições de comandos comuns e construção de toolkits de automação composáveis.

## O que são Módulos?

Módulos são packs externos dos quais seu pack depende. Eles são:

- **Hospedados em repositórios Git** (GitHub, GitLab, Bitbucket, etc.)
- **Versionados usando versionamento semântico** (tags como `v1.2.3` ou `1.2.3`)
- **Armazenados em cache localmente** para uso offline e performance
- **Isolados por namespace** para prevenir conflitos de comandos

## Por que Usar Módulos?

- **Reutilização de Código**: Compartilhe comandos comuns entre projetos
- **Versionamento**: Fixe dependências em versões específicas para estabilidade
- **Composabilidade**: Construa automações complexas a partir de packs menores e focados
- **Distribuição**: Publique packs reutilizáveis via repositórios Git
- **Reprodutibilidade**: Arquivos de lock garantem builds consistentes

## Início Rápido

### 1. Adicionar uma Dependência de Módulo

```bash
invowk module add https://github.com/user/common-tools.git ^1.0.0
```

### 2. Declarar no Seu Invkfile

```cue
group: "myproject"
version: "1.0"

requires: [
	{
		git_url: "https://github.com/user/common-tools.git"
		version: "^1.0.0"
	},
]

cmds: [
	{
		name: "build"
		description: "Build usando ferramentas comuns"
		implementations: [
			{
				script: "echo 'Building...'"
				runtimes: [{name: "native"}]
			}
		]
	}
]
```

### 3. Sincronizar Dependências

```bash
invowk module sync
```

### 4. Usar Comandos do Módulo

```bash
# Listar comandos disponíveis (incluindo módulos)
invowk cmd --list

# Executar um comando de um módulo
invowk cmd common-tools@1.0.0 build
```

## Como Funciona

1. **Declaração**: Dependências são declaradas no campo `requires` do seu invkfile
2. **Resolução**: `invowk module sync` resolve restrições de versão para versões específicas
3. **Download**: Módulos são clonados do Git e armazenados em cache localmente
4. **Arquivo de Lock**: Versões resolvidas são registradas em `invowk.lock.cue`
5. **Descoberta**: Comandos de módulos são descobertos e recebem namespace automaticamente

## Cache de Módulos

Módulos são armazenados em cache em `~/.invowk/modules/` por padrão. A estrutura do cache:

```
~/.invowk/modules/
├── sources/                    # Clones de repositórios Git
│   └── github.com/
│       └── user/
│           └── common-tools/   # Clone completo do repo
└── github.com/
    └── user/
        └── common-tools/
            └── 1.0.0/          # Pack extraído na versão
```

Sobrescreva a localização do cache:

```bash
export INVOWK_MODULES_PATH=/caminho/personalizado/do/cache
```

## Comparação com Packs

| Característica | Packs | Módulos |
|----------------|-------|---------|
| Localização | Diretório local | Repositório Git remoto |
| Versionamento | Nenhum | Versionamento semântico |
| Distribuição | Cópia manual | Clone Git |
| Namespace | Group do invkfile | `<pack>@<versão>` ou alias |
| Arquivo de lock | N/A | `invowk.lock.cue` |

## Próximos Passos

- [Declarando Dependências](./declaring-dependencies) - Aprenda a sintaxe do `requires`
- [Comandos CLI](./cli-commands) - Comandos de gerenciamento de módulos
- [Arquivo de Lock](./lock-file) - Entendendo o formato do arquivo de lock
