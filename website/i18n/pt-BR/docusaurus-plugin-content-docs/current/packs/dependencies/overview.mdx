---
sidebar_position: 1
---

import Snippet from '@site/src/components/Snippet';

# Visão Geral de Dependências de Packs

:::warning Alpha — Dependências de Packs Podem Mudar
Dependências de packs ainda estão sendo refinadas. Embora nosso objetivo seja manter compatibilidade retroativa, **mudanças incompatíveis podem ocorrer** antes do release 1.0. Arquivos de lock mantêm builds reprodutíveis, mas o comportamento de resolução pode evoluir.
:::

Dependências de packs permitem que um pack use comandos de outros packs hospedados em repositórios Git. Dependências são declaradas em `invkpack.cue` em `requires` e resolvidas em `invkpack.lock.cue`.

## O que são Dependências de Packs?

Dependências de packs são packs externos dos quais seu pack depende. Elas são:

- **Hospedadas em repositórios Git** (GitHub, GitLab, Bitbucket, etc.)
- **Versionadas com semver** (tags como `v1.2.3` ou `1.2.3`)
- **Cacheadas localmente** para uso offline e performance
- **Namespaced** por ID do pack ou alias para evitar colisões

## Início Rápido

### 1. (Opcional) Resolver uma Dependência

`invowk pack add` resolve uma dependência e imprime a entrada de `requires` que você pode copiar para `invkpack.cue`:

<Snippet id="packs/dependencies/quick-add" />

### 2. Declarar em `invkpack.cue`

<Snippet id="packs/dependencies/quick-invkpack" />

### 3. Sincronizar Dependências

<Snippet id="packs/dependencies/quick-sync" />

### 4. Verificar Dependências Resolvidas

<Snippet id="packs/dependencies/quick-deps" />

## Namespaces e Aliases

Quando um pack de dependência está instalado em um caminho de descoberta, execute seus comandos com o ID do pack (ou o alias, se você definiu):

<Snippet id="packs/dependencies/namespace-usage" />

## Como Funciona

1. **Declaração**: Dependências são listadas em `invkpack.cue` em `requires`
2. **Resolução**: `invowk pack sync` resolve restrições de versão para versões concretas
3. **Download**: Packs são clonados do Git e cacheados localmente
4. **Lock file**: Versões resolvidas são gravadas em `invkpack.lock.cue`
5. **Descoberta**: Comandos ficam disponíveis via namespace quando a dependência é instalada

:::note Somente Dependências Diretas
Comandos em um pack só podem chamar comandos de:
1. O mesmo pack
2. Packs instalados globalmente (seus caminhos de descoberta)
3. Packs declarados diretamente na lista `requires` desse pack

Dependências transitivas são resolvidas e cacheadas, mas seus comandos não ficam no escopo a menos que também estejam listadas diretamente.
:::

## Cache de Packs

Dependências de packs são cacheadas em `~/.invowk/packs/` por padrão:

<Snippet id="packs/dependencies/cache-structure" />

Sobrescreva a localização do cache:

<Snippet id="packs/dependencies/cache-env" />

## Próximos Passos

- [Declarando Dependências](./declaring-dependencies) - Aprenda a sintaxe de `requires`
- [Comandos CLI](./cli-commands) - Comandos para gerenciamento de dependências
- [Arquivo de Lock](./lock-file) - Entenda o formato do lock file
