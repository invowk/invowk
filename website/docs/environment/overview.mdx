---
sidebar_position: 1
---

import Snippet from '@site/src/components/Snippet';

# Environment Overview

Invowkâ„¢ provides powerful environment variable management for your commands. Set variables, load from files, and control precedence across multiple levels.

## Quick Example

<Snippet id="environment/overview-quick-example" />

## Environment Sources

Variables come from multiple sources, in order of precedence (highest first):

1. **CLI env vars** - `--env-var KEY=value`
2. **CLI env files** - `--env-file .env.custom`
3. **Invowk vars** - `INVOWK_FLAG_*` / `INVOWK_ARG_*`
4. **Implementation vars** - Implementation-level `env.vars`
5. **Command vars** - Command-level `env.vars`
6. **Root vars** - Root-level `env.vars`
7. **Implementation files** - Implementation-level `env.files`
8. **Command files** - Command-level `env.files`
9. **Root files** - Root-level `env.files`
10. **System environment** - Host's environment variables (subject to `env_inherit_mode`)

Earlier sources override later ones.

## Scope Levels

### Root Level

Applies to all commands in the invkfile:

<Snippet id="environment/scope-root" />

### Command Level

Applies to a specific command:

<Snippet id="environment/scope-command" />

### Implementation Level

Applies to a specific implementation:

<Snippet id="environment/scope-implementation" />

### Platform Level

Set variables per platform:

<Snippet id="environment/scope-platform" />

## Env Files

Load variables from `.env` files:

<Snippet id="environment/env-files" />

Files are loaded in order; later files override earlier ones.

See [Env Files](./env-files) for details.

## Environment Variables

Set variables directly:

<Snippet id="environment/env-vars" />

See [Env Vars](./env-vars) for details.

## CLI Overrides

Override at runtime:

<Snippet id="environment/cli-overrides" />

## Host Environment Inheritance

By default, native and virtual runtimes inherit the host environment, while container runtime starts with no host variables. You can control this per runtime or per invocation.

<Snippet id="reference/invkfile/env-inherit-example" />

<Snippet id="environment/env-inherit-cli" />

## Built-in Variables

Invowk provides variables for flags and arguments:

- `INVOWK_FLAG_*` - Flag values
- `INVOWK_ARG_*` - Argument values

## Container Environment

For container runtime, environment is passed into the container:

<Snippet id="environment/container-env" />

## Nested Commands

When a command invokes another command, some variables are isolated:

**Isolated (NOT inherited):**
- `INVOWK_ARG_*`
- `INVOWK_FLAG_*`

**Inherited (normal UNIX behavior):**
- Variables from `env.vars`
- Platform-level variables
- System environment

This prevents parent command arguments from leaking into child commands.

## Next Steps

- [Env Files](./env-files) - Load from .env files
- [Env Vars](./env-vars) - Set variables directly
- [Precedence](./precedence) - Understand override order
