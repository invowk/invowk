---
sidebar_position: 4
---

import Snippet from '@site/src/components/Snippet';

# Module Dependency Lock File

The lock file (`invkmod.lock.cue`) records the exact versions of all resolved module dependencies, ensuring reproducible builds across machines and over time.

It is auto-generated by `invowk module sync` and `invowk module update`.

## Example Lock File

<Snippet id="modules/dependencies/lockfile-example" />

## Root Fields

| Field | Description |
|-------|-------------|
| `version` | Lock file format version |
| `generated` | Timestamp when the lock file was created |
| `modules` | Map of module keys to locked module entries |

## Module Entry Fields

Each entry in `modules` contains:

| Field | Description |
|-------|-------------|
| `git_url` | Git repository URL |
| `version` | Original version constraint from `invkmod.cue` |
| `resolved_version` | Exact resolved version |
| `git_commit` | Commit SHA for the resolved version |
| `alias` | Namespace alias (if set) |
| `path` | Subdirectory path (if set) |
| `namespace` | Computed namespace for commands |

## Module Keys

The key in the `modules` map is derived from the Git URL and optional path:

<Snippet id="modules/dependencies/lockfile-key" />

## Usage Notes

- Commit `invkmod.lock.cue` to version control for reproducible builds.
- `invowk module add` does **not** write the lock file; use `invowk module sync`.

## Common Workflows

<Snippet id="modules/dependencies/lockfile-workflow" />
