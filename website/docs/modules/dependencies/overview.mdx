---
sidebar_position: 1
---

import Snippet from '@site/src/components/Snippet';

# Pack Dependencies Overview

:::warning Alpha — Pack Dependencies May Change
Pack dependencies are still being refined. While we aim for backwards compatibility, **breaking changes may occur** before the 1.0 release. Lock files keep builds reproducible, but resolution behavior may evolve.
:::

Pack dependencies let a pack pull in commands from other packs hosted in Git repositories. Dependencies are declared in `invkpack.cue` under `requires` and resolved into `invkpack.lock.cue`.

## What are Pack Dependencies?

Pack dependencies are external packs that your pack depends on. They are:

- **Hosted in Git repositories** (GitHub, GitLab, Bitbucket, etc.)
- **Versioned with semantic versioning** (tags like `v1.2.3` or `1.2.3`)
- **Cached locally** for offline use and performance
- **Namespaced** by pack ID or alias to prevent collisions

## Quick Start

### 1. (Optional) Resolve a Dependency

`invowk pack add` resolves a dependency and prints the `requires` entry you can copy into `invkpack.cue`:

<Snippet id="packs/dependencies/quick-add" />

### 2. Declare in `invkpack.cue`

<Snippet id="packs/dependencies/quick-invkpack" />

### 3. Sync Dependencies

<Snippet id="packs/dependencies/quick-sync" />

### 4. Verify Resolved Dependencies

<Snippet id="packs/dependencies/quick-deps" />

## Namespaces and Aliases

When a dependency pack is installed in a discovery path, run its commands with the pack ID (or alias if you set one):

<Snippet id="packs/dependencies/namespace-usage" />

## How It Works

1. **Declaration**: Dependencies are listed in `invkpack.cue` under `requires`
2. **Resolution**: `invowk pack sync` resolves version constraints to concrete versions
3. **Download**: Packs are cloned from Git and cached locally
4. **Lock file**: Resolved versions are written to `invkpack.lock.cue`
5. **Discovery**: Commands are available via the pack namespace when the dependency is installed

:::note Direct Dependencies Only
Commands in a pack can only call commands from:
1. The same pack
2. Globally installed packs (your discovery paths)
3. Packs declared directly in that pack’s `requires` list

Transitive dependencies are resolved and cached, but their commands are not in scope unless they are also listed directly.
:::

## Pack Cache

Pack dependencies are cached in `~/.invowk/packs/` by default:

<Snippet id="packs/dependencies/cache-structure" />

Override the cache location:

<Snippet id="packs/dependencies/cache-env" />

## Next Steps

- [Declaring Dependencies](./declaring-dependencies) - Learn the `requires` syntax
- [CLI Commands](./cli-commands) - Pack dependency management commands
- [Lock File](./lock-file) - Understanding the lock file format
