# Test: Tool dependency checks (03-deps-tools.tape equivalent)
# Tests the tool/binary dependency checking feature

# Run against project's invkfile.cue
cd $PROJECT_ROOT

# Test 1: deps tool single - requires a single tool (sh)
exec invowk cmd 'deps tool single'
stdout 'sh is available!'
! stderr .

# Test 2: deps tool alternatives - requires any of: podman, docker, nerdctl
# Note: This may fail if no container runtime is installed, which is acceptable
# We use '?' to make this test optional/skippable
[!exec:docker] [!exec:podman] skip 'no container runtime available'
exec invowk cmd 'deps tool alternatives'
stdout 'Container runtime check passed!'
stdout 'At least one of podman/docker/nerdctl is available'
! stderr .

# Test 3: deps tools mixed - multiple tool dependencies with mixed alternatives
exec invowk cmd 'deps tools mixed'
stdout 'All tool dependencies satisfied!'
stdout 'sh is available'
stdout 'Either cat or type is available'
! stderr .
