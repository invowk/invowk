# Test: Tool dependencies with cross-platform alternatives using native runtime
# Mirrors virtual_deps_tools_platform.txtar but with platform-split native implementations

cd $WORK

# Test 1: Command with tool dep using cross-platform alternatives
exec invowk cmd 'deps tool platform'
stdout 'platform tool dep check passed'
! stderr .

-- invowkfile.cue --
cmds: [
	{
		name: "deps tool platform"
		implementations: [
			{
				script:    "echo 'platform tool dep check passed'"
				runtimes:  [{name: "native"}]
				platforms: [{name: "linux"}, {name: "macos"}]
			},
			{
				script:    "Write-Output 'platform tool dep check passed'"
				runtimes:  [{name: "native"}]
				platforms: [{name: "windows"}]
			},
		]
		depends_on: {
			tools: [
				{alternatives: ["sh", "cmd.exe", "powershell.exe"]},
			]
		}
	},
]
