# Test: Virtual shell runtime (02-virtual.tape equivalent)
# Tests the built-in virtual shell interpreter (mvdan/sh)

cd $WORK

# Test 1: virtual hello - simple command using virtual shell runtime
exec invowk cmd 'virtual hello'
stdout 'Hello from the virtual shell!'
! stderr .

# Test 2: multi runtime - command that can run in native or virtual
exec invowk cmd 'multi runtime'
stdout 'This can run in native \(default\) or virtual runtime'
! stderr .

-- invowkfile.cue --
cmds: [
	{
		name:        "virtual hello"
		description: "Print greeting using virtual shell interpreter"
		implementations: [{
			script:    "echo 'Hello from the virtual shell!'"
			runtimes:  [{name: "virtual"}]
			platforms: [{name: "linux"}, {name: "macos"}, {name: "windows"}]
		}]
	},
	{
		name:        "multi runtime"
		description: "Command that can run in native or virtual runtime"
		implementations: [{
			script:    "echo 'This can run in native (default) or virtual runtime'"
			runtimes:  [{name: "virtual"}]
			platforms: [{name: "linux"}, {name: "macos"}, {name: "windows"}]
		}]
	},
]
