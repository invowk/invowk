# Test: Command categories using native runtime
# Mirrors virtual_category.txtar but with platform-split native implementations

cd $WORK

# Test 1: List commands shows category grouping
exec invowk cmd
stdout '\[Build\]'
stdout '\[Test\]'
stdout 'compile'
stdout 'unit-test'
stdout 'uncategorized'

-- invowkfile.cue --
cmds: [
	{
		name:        "uncategorized"
		description: "No category"
		implementations: [
			{
				script:    "echo uncategorized"
				runtimes:  [{name: "native"}]
				platforms: [{name: "linux"}, {name: "macos"}]
			},
			{
				script:    "Write-Output 'uncategorized'"
				runtimes:  [{name: "native"}]
				platforms: [{name: "windows"}]
			},
		]
	},
	{
		name:        "compile"
		description: "Compile the project"
		category:    "Build"
		implementations: [
			{
				script:    "echo compiling"
				runtimes:  [{name: "native"}]
				platforms: [{name: "linux"}, {name: "macos"}]
			},
			{
				script:    "Write-Output 'compiling'"
				runtimes:  [{name: "native"}]
				platforms: [{name: "windows"}]
			},
		]
	},
	{
		name:        "unit-test"
		description: "Run unit tests"
		category:    "Test"
		implementations: [
			{
				script:    "echo testing"
				runtimes:  [{name: "native"}]
				platforms: [{name: "linux"}, {name: "macos"}]
			},
			{
				script:    "Write-Output 'testing'"
				runtimes:  [{name: "native"}]
				platforms: [{name: "windows"}]
			},
		]
	},
]
