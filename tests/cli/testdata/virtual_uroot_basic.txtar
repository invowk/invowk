# Test: U-root basic utilities
# Tests the built-in u-root file utilities (cat, ls, mkdir, rm, touch) in virtual runtime

cd $WORK

# Test 1: Basic u-root command - creates files, cats, lists, removes
exec invowk cmd 'uroot basic'
stdout '=== cat output ==='
stdout 'Hello from u-root!'
stdout '=== ls output ==='
stdout 'test.txt'
stdout '=== uroot basic test complete ==='
! stderr .

-- invkfile.cue --
cmds: [
	{
		name:        "uroot basic"
		description: "Test basic u-root file operations"
		implementations: [{
			script: """
				mkdir -p /tmp/invowk-uroot-test
				echo 'Hello from u-root!' > /tmp/invowk-uroot-test/test.txt
				echo '=== cat output ==='
				cat /tmp/invowk-uroot-test/test.txt
				echo '=== ls output ==='
				ls /tmp/invowk-uroot-test
				rm -rf /tmp/invowk-uroot-test
				echo '=== uroot basic test complete ==='
				"""
			runtimes: [{name: "virtual"}]
			platforms: [{name: "linux"}, {name: "macos"}, {name: "windows"}]
		}]
	},
]
